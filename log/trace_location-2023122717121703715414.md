Generated by [trace_location](https://github.com/yhirano55/trace_location) at 2023-12-27 17:16:54 -0500

<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/scoping/named.rb:24</summary>

##### ActiveRecord::Scoping::Named::ClassMethods.all

```ruby
def all
  if current_scope
    current_scope.clone
  else
    default_scoped
  end
end

# called from app/controllers/movies_controller.rb:11
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/scoping.rb:13</summary>

##### ActiveRecord::Scoping::ClassMethods.current_scope

```ruby
def current_scope #:nodoc:
  ScopeRegistry.value_for(:current_scope, base_class.to_s)
end

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/scoping/named.rb:25
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/inheritance.rb:100</summary>

##### ActiveRecord::Inheritance::ClassMethods.base_class

```ruby
def base_class
  unless self < Base
    raise ActiveRecordError, "#{name} doesn't belong in a hierarchy descending from ActiveRecord"
  end

  if superclass == Base || superclass.abstract_class?
    self
  else
    superclass.base_class
  end
end

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/scoping.rb:14
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activesupport-4.2.10/lib/active_support/per_thread_registry.rb:50</summary>

##### ActiveRecord::Scoping::ScopeRegistry.value_for

```ruby
singleton_class.delegate name, to: :instance

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/scoping.rb:14
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activesupport-4.2.10/lib/active_support/per_thread_registry.rb:41</summary>

##### ActiveSupport::PerThreadRegistry.instance

```ruby
def instance
  Thread.current[@per_thread_registry_key] ||= new
end

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activesupport-4.2.10/lib/active_support/per_thread_registry.rb:50
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/scoping.rb:62</summary>

##### ActiveRecord::Scoping::ScopeRegistry#initialize

```ruby
def initialize
  @registry = Hash.new { |hash, key| hash[key] = {} }
end

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activesupport-4.2.10/lib/active_support/per_thread_registry.rb:42
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/scoping.rb:67</summary>

##### ActiveRecord::Scoping::ScopeRegistry#value_for

```ruby
def value_for(scope_type, variable_name)
  raise_invalid_scope_type!(scope_type)
  @registry[scope_type][variable_name]
end

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activesupport-4.2.10/lib/active_support/per_thread_registry.rb:50
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/scoping.rb:80</summary>

##### ActiveRecord::Scoping::ScopeRegistry#raise_invalid_scope_type!

```ruby
def raise_invalid_scope_type!(scope_type)
  if !VALID_SCOPE_TYPES.include?(scope_type)
    raise ArgumentError, "Invalid scope type '#{scope_type}' sent to the registry. Scope types must be included in VALID_SCOPE_TYPES"
  end
end

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/scoping.rb:68
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/scoping/named.rb:32</summary>

##### ActiveRecord::Scoping::Named::ClassMethods.default_scoped

```ruby
def default_scoped # :nodoc:
  relation.merge(build_default_scope)
end

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/scoping/named.rb:28
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/core.rb:253</summary>

##### ActiveRecord::Core::ClassMethods.relation

```ruby
def relation #:nodoc:
  relation = Relation.create(self, arel_table)

  if finder_needs_type_condition?
    relation.where(type_condition).create_with(inheritance_column.to_sym => sti_name)
  else
    relation
  end
end

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/scoping/named.rb:33
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/core.rb:237</summary>

##### ActiveRecord::Core::ClassMethods.arel_table

```ruby
def arel_table # :nodoc:
  @arel_table ||= Arel::Table.new(table_name, arel_engine)
end

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/core.rb:254
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/relation/delegation.rb:105</summary>

##### ActiveRecord::Delegation::ClassMethods.create

```ruby
def create(klass, *args)
  relation_class_for(klass).new(klass, *args)
end

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/core.rb:254
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/relation/delegation.rb:111</summary>

##### ActiveRecord::Delegation::ClassMethods.relation_class_for

```ruby
def relation_class_for(klass)
  klass.relation_delegate_class(self)
end

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/relation/delegation.rb:106
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/relation/delegation.rb:8</summary>

##### ActiveRecord::Delegation::DelegateCache.relation_delegate_class

```ruby
def relation_delegate_class(klass) # :nodoc:
  @relation_delegate_cache[klass]
end

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/relation/delegation.rb:112
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/relation.rb:23</summary>

##### ActiveRecord::Relation#initialize

```ruby
def initialize(klass, table, values = {})
  @klass  = klass
  @table  = table
  @values = values
  @offsets = {}
  @loaded = false
end

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/relation/delegation.rb:106
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/inheritance.rb:77</summary>

##### ActiveRecord::Inheritance::ClassMethods.finder_needs_type_condition?

```ruby
def finder_needs_type_condition? #:nodoc:
  # This is like this because benchmarking justifies the strange :false stuff
  :true == (@finder_needs_type_condition ||= descends_from_active_record? ? :false : :true)
end

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/core.rb:256
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/core.rb:253</summary>

##### ActiveRecord::Core::ClassMethods.relation

```ruby
def relation #:nodoc:
  relation = Relation.create(self, arel_table)

  if finder_needs_type_condition?
    relation.where(type_condition).create_with(inheritance_column.to_sym => sti_name)
  else
    relation
  end
end

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/scoping/default.rb:97
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/core.rb:237</summary>

##### ActiveRecord::Core::ClassMethods.arel_table

```ruby
def arel_table # :nodoc:
  @arel_table ||= Arel::Table.new(table_name, arel_engine)
end

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/core.rb:254
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/relation/delegation.rb:105</summary>

##### ActiveRecord::Delegation::ClassMethods.create

```ruby
def create(klass, *args)
  relation_class_for(klass).new(klass, *args)
end

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/core.rb:254
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/relation/delegation.rb:111</summary>

##### ActiveRecord::Delegation::ClassMethods.relation_class_for

```ruby
def relation_class_for(klass)
  klass.relation_delegate_class(self)
end

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/relation/delegation.rb:106
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/relation/delegation.rb:8</summary>

##### ActiveRecord::Delegation::DelegateCache.relation_delegate_class

```ruby
def relation_delegate_class(klass) # :nodoc:
  @relation_delegate_cache[klass]
end

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/relation/delegation.rb:112
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/relation.rb:23</summary>

##### ActiveRecord::Relation#initialize

```ruby
def initialize(klass, table, values = {})
  @klass  = klass
  @table  = table
  @values = values
  @offsets = {}
  @loaded = false
end

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/relation/delegation.rb:106
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/inheritance.rb:77</summary>

##### ActiveRecord::Inheritance::ClassMethods.finder_needs_type_condition?

```ruby
def finder_needs_type_condition? #:nodoc:
  # This is like this because benchmarking justifies the strange :false stuff
  :true == (@finder_needs_type_condition ||= descends_from_active_record? ? :false : :true)
end

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/core.rb:256
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/scoping/default.rb:97</summary>

##### ActiveRecord::Scoping::Default::ClassMethods.build_default_scope

```ruby
def build_default_scope(base_rel = relation) # :nodoc:
  return if abstract_class?
  if !Base.is_a?(method(:default_scope).owner)
    # The user has defined their own default scope method, so call that
    evaluate_default_scope { default_scope }
  elsif default_scopes.any?
    evaluate_default_scope do
      default_scopes.inject(base_rel) do |default_scope, scope|
        default_scope.merge(base_rel.scoping { scope.call })
      end
    end
  end
end

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/scoping/named.rb:33
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/inheritance.rb:130</summary>

##### ActiveRecord::Inheritance::ClassMethods.abstract_class?

```ruby
def abstract_class?
  defined?(@abstract_class) && @abstract_class == true
end

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/scoping/default.rb:98
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activesupport-4.2.10/lib/active_support/core_ext/class/attribute.rb:86</summary>

##### ActiveRecord::Base.default_scopes

```ruby
define_method(name) { val }

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/scoping/default.rb:102
```
</details>
<details open>
<summary>/home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/relation/spawn_methods.rb:30</summary>

##### ActiveRecord::SpawnMethods#merge

```ruby
def merge(other)
  if other.is_a?(Array)
    to_a & other
  elsif other
    spawn.merge!(other)
  else
    self
  end
end

# called from /home/daniel/.rvm/gems/ruby-2.6.6/gems/activerecord-4.2.10/lib/active_record/scoping/named.rb:33
```
</details>
